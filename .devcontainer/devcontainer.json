{
  "name": "Buble!",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-22.04",
  "features": {
    "docker-in-docker": "latest"
  },
  "forwardPorts": [
    5800
  ],
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y ca-certificates curl && sudo install -m 0755 -d /etc/apt/keyrings && sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc && sudo chmod a+r /etc/apt/keyrings/docker.asc && echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo \"$VERSION_CODENAME\") stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null && sudo apt-get update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin && sudo usermod -aG docker $USER && sudo systemctl enable docker && sudo systemctl start docker && sleep 10 && docker --version && echo 'Docker installed successfully'",
  "postStartCommand": "sleep 20 && docker ps -a | grep firefox && docker stop firefox-container 2>/dev/null || true && docker run -d --rm --name firefox-container -p 5800:5800 -v /tmp/firefox:/config jlesage/firefox && echo 'Firefox container started' && sleep 10 && docker logs firefox-container --tail 20",
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-azuretools.vscode-docker"
      ]
    }
  },
  "runArgs": [
    "--privileged"
  ]
}