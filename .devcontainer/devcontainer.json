{
  "name": "Buble!",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-22.04",
  "features": {
    "docker-in-docker": "latest"
  },
  "forwardPorts": [
    5800
  ],
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y curl wget && echo 'Checking Docker installation...' && docker --version && echo 'Docker is ready!' && mkdir -p /tmp/firefox && chmod 777 /tmp/firefox",
  "postStartCommand": "sleep 10 && echo 'Starting Firefox container...' && docker stop firefox-container 2>/dev/null || true && docker rm firefox-container 2>/dev/null || true && docker run -d --name firefox-container --restart=unless-stopped -p 5800:5800 -p 5900:5900 -v /tmp/firefox:/config:rw -e DISPLAY_WIDTH=1600 -e DISPLAY_HEIGHT=900 -e KEEP_APP_RUNNING=1 jlesage/firefox && echo 'Firefox container started' && sleep 15 && echo 'Container status:' && docker ps && echo 'Container logs:' && docker logs firefox-container --tail 10",
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-azuretools.vscode-docker"
      ]
    }
  },
  "runArgs": [
    "--privileged"
  ]
}